# 梦幻西游藏宝阁 ajax 部分数据解密方式
# ourl 是原始页面，durl 才是ajax数据页，内部部分数据有一定的加密
ourl = 'https://xyq.cbg.163.com/cgi-bin/query.py?act=query&server_id=45&areaid=38&server_name=%BB%A8%D1%F9%C4%EA%BB%AA&page=1&kindid=27&kind_depth=2'
durl = 'https://recommd.xyq.cbg.163.com/cgi-bin/recommend.py?callback=Request.JSONP.request_map.request_0&_=1560661726175&act=recommd_by_role&server_id=45&areaid=38&server_name=%E8%8A%B1%E6%A0%B7%E5%B9%B4%E5%8D%8E&page=1&kindid=27&view_loc=equip_list&count=15'

import base64
def decode(string):
    a, b  = string.strip('@').split('@')
    b, p, idx = eval(base64.b64decode(b)), '', 0
    for i in b:
        q = ord(a[idx%len(a)])
        idx += 1
        p += chr(ord(i) ^ q)
    return p

# 加密的数据以及解密的方式处理
encode_data = "@L6t6JiJWeGGcIHzh@IjdcdTAwMTRcdTAwMDFFL1x1MDAxYiRcIlxiZX1DeH5PW3tcdTAwMGZYXHUwMDE2aFxiLjM6KlwiXHUwMDBmPVx1MDAxN1x1MDAxYlx1MDAxYzhEXHUwMDA3XHUwMDE0cElcdTAwMTFcbklnZVx1MDAxYiApXHUwMDE0XHUwMDExOVx1MDAxNE5cdTAwMTZ7RWp1XHUwMDFkLjJcdTAwMGYgKVx1MDAxNEp2XHUwMDE2Q1x1MDAwMGZJaDQrJipcdTAwMDZrclpKXHUwMDEwQ0JcdTAwMDMsX1x1MDAxNlwiUHZzWlx1MDAxNT1PXihXKEN+XHUwMDBmfGc5MnFWLHgmXHUwMDFkelx1MDAwMUVQaEVqdVxmXHUwMDAwNVx1MDAwMi0tWFJsXHUwMDA3Q1x1MDAwM2ZJaCRcdTAwMTAqKlx1MDAwMjsxWFJsXHUwMDE0KENcdTAwN2ZccixlOTJxXHUwMDA2e3kmXHUwMDFkeVx1MDAwNFx1MDAxNVRqNT9hV3Z3Pzx9XHUwMDE5W31cZkZcdTAwMDVzW2pcdTAwMGJcdTAwMTBxd1ArXHUwMDE0XHUwMDBmXFwqU1x1MDAxMVxmfV9qXHUwMDBiXHUwMDEwcXdQK1x1MDAxNFx1MDAwZl0uV0RqP10sMlx1MDAwMH1zVWtkWkolY1x1MDAwNHMyXHUwMDE5aG1FdndUfXBMUXpcdTAwMDVYXHUwMDE2aFx1MDAwMFx1MDAwNSVcdTAwMDJcYiFcdTAwMDUsOlhSbFx1MDAwNlhcdTAwMTZoXHUwMDAwXHI4XG4jKVx1MDAwNjo7WFJsXHUwMDA3Rlx1MDAwMXlFanVcZlx1MDAwNSZcdTAwMDcnLVx0XHUwMDFiblxmVFx1MDAwNmZJaD4oJj8mMThcdTAwMGVbblxmVFx1MDAwNFx1MDA3ZkVqdVxmXG4mXHUwMDFiXGYwXG5cdTAwMWN+XHUwMDE0Tlx1MDAxNnhcXGZ3Ry5cblx1MDAwMjFcclx1MDAwMlx1MDAxODhcdTAwMDdWXGZqW3p7RWUuLigwP1x1MDAxMDxCQVx1MDAxNHBJJFwiXHQra0NrITdcdDRzXGZGPl1obUV1ck9palx1MDAxMyEvWVx1MDAxYVx1MDAxNHBJfmVJZ2Vcblx1MDAxYSlcZlx1MDAwMVwiUVZcZmpZZndHXHUwMDA2JFx1MDAwYlx1MDAxOSdcdTAwMTNcdTAwMDY4Ylx1MDAxYkIrXHUwMDA1aG1FdXRae2RaSiV0XHUwMDExVzlcdTAwMWRcdTAwMTk8XGZzZVlpeUpEbFx1MDAxNFx1MDAxZGUpXHUwMDAxJThcdGV9Q3h9VkhuXzZTK1x1MDAxYT5cdTAwMDRcdTAwMGUudkFzaEteYFx1MDAxNlZzMlx1MDAxOVx1MDAwMCAnJjRcdTAwMDZrclpZfFx1MDAwNkRcdTAwMDZ6WXpnVWtnQSBcblx1MDAxZlx0P0InXSNaaG1FdndPaWpcdTAwMTMqKVdcdTAwMDdCXHUwMDE5XHUwMDAyI2VHfWdSeWRaSiVsXHUwMDFjQytcdTAwMDdcdTAwMTA/XGZlfUN7ZFpKJXVcdTAwMTVFXCJLcHdUcVx1MDA3ZltxZFpKJXNcZkY+OiE+V2V9Q3t9VkhuXzFOOlx1MDAxZFx1MDAxOTxcZnRlWWl6T0RsXHUwMDE0XHUwMDFkczJcdTAwMTk+XHUwMDA0XHUwMDBlLnZBc2hLRGxcdTAwMTRcdTAwMWRlKVx1MDAwMVx1MDAwNTFcdTAwMDNcIjVBc2hJXFxgXHUwMDE2Vl9cdTAwMGZcdTAwMTE6IzYsLldrclpaeVx1MDAxYVRcdTAwMTQjLDInXHUwMDExXHUwMDE0LFxufGpASH1cdTAwMDZYXHUwMDE2aFxiJjs6NCxcbiUkXHRKdlx1MDAxNlx1MDAwZlx1MDAxNHhYfHVfZ3ZTeGRaSn5cdTAwMDdDXHUwMDE0cElcdTAwN2ZnSWdlUXh6WFJsXHUwMDA3QVx1MDAwNmZJaGZcXFx1MDA3ZmVZaXlWSG5cdTAwMDRFXHUwMDA2aFNqb11rZ0F7eUtKdlx1MDAxNkVcdTAwMDN6RWp1VHJ+QXNoSERsXHUwMDE0RVx1MDAwM3JLcHdWa2dBeHFNSnZcdTAwMTZFXHUwMDFhakt7blNlfUN4ZFpKflx1MDAwN0xcdTAwMTRwSXtlVWtnQXp8Qlh+XHUwMDE0Tlx1MDAxNntFanVUdnZBc2hLXFx7XHUwMDFhVFx1MDAxNHldcmdSZX1DeGRaSlx1MDA3Zlx1MDAwMkxcdTAwMDZ+S3B3VGtnQXp8Qlp+XHUwMDE0Tlx1MDAxNntFanVXdHBBc2hLWGBcdTAwMTZWXHUwMDA0eVlobUV1d09paklcXHRcdTAwMDRBXHUwMDE0cEl7e0VldlZ9akBIelx1MDAxYVRcdTAwMTR7Xn51X2d2T2lqS19cdTAwN2ZcdTAwMTROXHUwMDE2e0VqdVRycUFzaEhEbFx1MDAxNEZcdTAwMDV7S3B3UFx1MDA3ZmtDa3lLWG5cZlRcdTAwMGZ6RWp1VHB+QXNoS0RsXHUwMDE0RVx1MDAwMHhLcHdUa2dBfHpKW35cdTAwMTROXHUwMDE2e0VqdVB1d1B4akBIfVx1MDAxYVRcdTAwMTR7Xnp1X2dzT2lqSFh9XHUwMDE0Tlx1MDAxNntdentFZXVTempASHlcdTAwMDZYXHUwMDE2aFt6ZUd9Z1J6eFZIblx1MDAwNERcdTAwMDNoU2pgVWtnQXt4Tkp2XHUwMDE2TVx1MDAwNmZJaGVVcGVZaVx1MDA3ZkpEbFx1MDAxNEZcdTAwMDZ8S3B3XFxxa0NrekpRblxmVFx1MDAwM3pFanVXd1x1MDA3ZkFzaEtcXHxcdTAwMWFUXHUwMDE0XHUwMDdmW3pmU2V9Q3hkWkpcdTAwN2ZcdTAwMDJMXHUwMDA3ektwd1RrZ0F4eEJKdlx1MDAxNkVcdTAwMDB6RWp1VHd+QXNoS195XHUwMDFhVFx1MDAxNHtfc3VfZ3ZPaWpJXFx0XHUwMDA3Qlx1MDAxNHBJe3tFZXRXcXlDSnZcdTAwMTZFXHUwMDFhakt7YVBlfUN4ZFpKfVx1MDAwMEJcdTAwMTRwSXt7RWV2VX5qQEh9XHUwMDFhVFx1MDAxNHtZfHVfZ3ZUfGRaSn1cdTAwMDZDXHUwMDE0cEl7YlVrZ0F7ektKdlx1MDAxNkdcdTAwMWFqS3tnUGV9Q3hcdTAwN2ZPRGxcdTAwMTRHXHUwMDAyclBzdV9ndk9paktefFx1MDAxNE5cdTAwMTZcdTAwN2ZFanVWc1x1MDA3ZlJ9akBIfUtYXHUwMDE2aFx1MDAwMHlcdTAwMTFcdD5cdTAwMGJcdTAwMTVrclpYYFx1MDAxNlZzMlx1MDAxOVx1MDAwMCBHfWdTZWhYXHUwMDE4KUIrTiNcdTAwMWMmPlx1MDAwNCllWWl8TERsXHUwMDE0XHUwMDFjXy1cdTAwMDEmPlx1MDAwMi8zQXNoWDNcdTAwMTFcdTAwMTRcdCI=@"
print('----- 加密数据 -----');print(encode_data)
print('----- 解密数据 -----');print(decode(encode_data))
